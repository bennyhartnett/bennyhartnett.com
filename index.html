<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Benny Hartnett</title>
  <meta name="description"
    content="Insights and projects spanning generative AI, GIS, government contracting, and nuclear research." />
  <meta name="keywords" content="Benny Hartnett, generative AI, GIS, government contracting, nuclear" />
  <meta name="author" content="Benny Hartnett" />
  <link rel="canonical" href="" id="canonical-link" />
  <link rel="sitemap" type="application/xml" href="sitemap.xml" />
  <link rel="icon" type="image/svg+xml" href="https://unpkg.com/heroicons@2.0.18/24/solid/code-bracket.svg" />
  <meta name="robots" content="index,follow" />
  <meta property="og:title" content="Benny Hartnett" />
  <meta property="og:description"
    content="Explore projects and articles on generative AI, GIS, government contracting, and nuclear technology." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="" id="og-url" />

  <script async src="https://ga.jspm.io/npm:es-module-shims@1.5.1/dist/es-module-shims.js"
    crossorigin="anonymous"></script>
  <script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.165.0/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.165.0/examples/jsm/"
    }
  }
  </script>

  <!-- External Stylesheets -->
  <link rel="stylesheet" href="assets/css/main.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-dark@5/dark.min.css" />

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.js"></script>
  <script type="module">
    import { initWaveBackground } from "./scripts/wave-background.js";
    window.initWaveBackground = initWaveBackground;
  </script>

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-GGGPH0X4LN"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-GGGPH0X4LN', { send_page_view: false });
  </script>
</head>

<body>
  <!-- Navigation -->
  <nav>
    <div class="nav-header">
      <div class="title">Benny Hartnett</div>
      <a href="#"><i aria-hidden="true"></i></a>
      <button class="menu-toggle" aria-label="Toggle navigation">
        <i class="fa-solid fa-bars"></i>
      </button>
    </div>
  </nav>

  <div class="content">
    <!-- Loaded content will appear here -->
  </div>

  <script>
    // Initialize background when loaded
    window.addEventListener('DOMContentLoaded', () => {
      window.initWaveBackground();
      const container = document.querySelector('.content');
      const toggleBtn = document.querySelector('.menu-toggle');
      const menu = document.querySelector('nav .menu');
      const canonicalTag = document.getElementById('canonical-link');
      const ogUrlTag = document.getElementById('og-url');
      const baseUrl = window.location.origin + window.location.pathname.replace(/[^\/]*$/, '');
      if (canonicalTag) canonicalTag.setAttribute('href', baseUrl);
      if (ogUrlTag) ogUrlTag.setAttribute('content', baseUrl);

      const metaMap = {
        'pages/home.html': {
          title: 'Benny Hartnett - Home',
          desc: 'Overview of Benny Hartnett\'s projects including generative AI, GIS, nuclear work and contracting.'
        },
        'pages/generative-ai.html': {
          title: 'Generative AI - Benny Hartnett',
          desc: 'Articles and resources on generative AI from Benny Hartnett.'
        },
        'pages/gis.html': {
          title: 'GIS - Benny Hartnett',
          desc: 'Geographic Information Systems projects and resources.'
        },
        'pages/government-contracting.html': {
          title: 'Government Contracting - Benny Hartnett',
          desc: 'Insights and resources about government contracting.'
        },
        'nuclear.html': {
          title: 'Nuclear Research - Benny Hartnett',
          desc: 'Summaries of Benny Hartnett\'s nuclear-related projects.'
        },
        'pages/privacy.html': {
          title: 'Privacy Policy - Benny Hartnett',
          desc: 'Privacy practices for this site.'
        },
        'pages/projects.html': {
          title: 'Projects - Benny Hartnett',
          desc: 'List of projects and ideas explored by Benny Hartnett.'
        },
        '404.html': {
          title: 'Page Not Found - Benny Hartnett',
          desc: 'The requested page could not be found.'
        }
      };

      if (toggleBtn && menu) {
        toggleBtn.addEventListener('click', () => {
          menu.classList.toggle('open');
        });
      }

      const title = document.querySelector('nav .title');
      if (title) {
        title.addEventListener('click', (e) => {
          e.preventDefault();
          loadContent('pages/home.html');
        });
      }

      function loadContent(url, push = true) {
        fetch(url)
          .then(r => r.text())
          .then(html => {
            container.innerHTML = html;
            // Execute any inline scripts from the loaded fragment
            container.querySelectorAll('script').forEach(oldScript => {
              const newScript = document.createElement('script');
              if (oldScript.type) newScript.type = oldScript.type;
              if (oldScript.src) {
                newScript.src = oldScript.src;
              } else {
                newScript.textContent = oldScript.textContent;
              }
              oldScript.replaceWith(newScript);
            });
            const meta = metaMap[url] || metaMap['pages/home.html'];
            document.title = meta.title;
            const descTag = document.querySelector('meta[name="description"]');
            if (descTag) descTag.setAttribute('content', meta.desc);
            const canonical = document.querySelector('link[rel="canonical"]');
            const ogUrl = document.querySelector('meta[property="og:url"]');
            // Clean URL for display (remove pages/ prefix and .html)
            const cleanPath = url.replace('pages/', '').replace('.html', '');
            const fullUrl = baseUrl + (cleanPath === 'home' ? '' : cleanPath);
            if (canonical) canonical.setAttribute('href', fullUrl);
            const ogTitle = document.querySelector('meta[property="og:title"]');
            if (ogTitle) ogTitle.setAttribute('content', meta.title);
            const ogDesc = document.querySelector('meta[property="og:description"]');
            if (ogDesc) ogDesc.setAttribute('content', meta.desc);
            if (ogUrl) ogUrl.setAttribute('content', fullUrl);
            // Track page view in Google Analytics
            if (typeof gtag === 'function') {
              gtag('event', 'page_view', {
                page_path: '/' + cleanPath,
                page_title: meta.title,
                page_location: fullUrl
              });
            }
            if (push) {
              const displayUrl = cleanPath === 'home' ? '/' : '/' + cleanPath;
              history.pushState({ url }, '', displayUrl);
            }
          })
          .catch(() => {
            if (url === 'pages/home.html') {
              container.innerHTML = `
                <div class="home-container">
                <ul class="link-list">
                  <li><a href="https://www.linkedin.com/in/dev-dc" target="_blank" rel="noopener">LinkedIn</a></li>
                  <li><a href="#" class="copy-email" data-email="me@bennyhartnett.com">Email</a></li>
                  <li><a href="https://github.com/bennyhartnett" target="_blank" rel="noopener">GitHub</a></li>
                  <li><a href="https://www.lionpro.ai/" target="_blank" rel="noopener">Generative AI</a></li>
                  <li><a href="https://lionfederal.com" target="_blank" rel="noopener">Government Contracting</a></li>
                  <li><a href="nuclear.html">Nuclear</a></li>
                </ul>
                </div>`;
            } else if (url === 'pages/gis.html') {
              container.innerHTML = `
                <div class="page-content">
                <h1>GIS</h1>
                <p>This page will highlight my GIS work.</p>
                <p>Additional details about mapping projects will appear here.</p>
                </div>`;
            } else if (url === 'pages/privacy.html') {
              container.innerHTML = `
                <div class="page-content">
                <h1>Privacy Policy</h1>
                <p>Last updated: ${new Date().getFullYear()}</p>
                <p>We may collect personal or non-personal data for any purpose.</p>
                <p>Contact me@bennyhartnett.com for questions.</p>
                </div>`;
            } else {
              container.innerHTML = '<p style="color:white">Page could not be loaded.</p>';
            }
          });
      }

      document.body.addEventListener('click', (e) => {
        const emailLink = e.target.closest('.copy-email');
        if (emailLink) {
          e.preventDefault();
          const email = emailLink.dataset.email;
          navigator.clipboard.writeText(email).then(() => {
            Swal.fire({
              text: 'Email copied to clipboard',
              icon: 'success',
              toast: true,
              position: 'top-end',
              showConfirmButton: false,
              timer: 2000,
              background: '#333',
              color: '#fff'
            });
          });
          return;
        }
        const link = e.target.closest('a');
        if (!link) return;
        const href = link.getAttribute('href');
        // Skip SPA handling for nuclear page - do full page navigation
        if (href === 'nuclear.html' || href === '/nuclear.html' || href === '/nuclear') {
          return; // Let browser handle normally
        }
        if (href && href.endsWith('.html') && !href.startsWith('http')) {
          e.preventDefault();
          // Convert old paths to new paths
          let newHref = href;
          if (!href.startsWith('pages/') && href !== 'nuclear.html' && href !== '404.html' && href !== 'index.html') {
            newHref = 'pages/' + href;
          }
          loadContent(newHref);
        }
      });

      window.addEventListener('popstate', (e) => {
        const state = e.state;
        if (state && state.url) {
          loadContent(state.url, false);
        }
      });

      // Determine initial page from pathname (clean URL) or hash (legacy)
      let initial = 'pages/home.html';
      const path = location.pathname.replace(/^\//, '').replace(/\/$/, '');
      if (path && path !== 'index.html' && path !== '') {
        // Map clean URLs to actual file paths
        if (path === 'nuclear' || path === 'nuclear.html') {
          // Nuclear page is standalone, redirect to it
          window.location.href = '/nuclear.html';
          return;
        }
        const pagePath = path.endsWith('.html') ? path : path + '.html';
        initial = 'pages/' + pagePath;
      } else if (location.hash) {
        const hashPage = location.hash.substring(1);
        initial = 'pages/' + (hashPage.endsWith('.html') ? hashPage : hashPage + '.html');
      }
      const cleanPath = initial.replace('pages/', '').replace('.html', '');
      const cleanUrl = cleanPath === 'home' ? '/' : '/' + cleanPath;
      history.replaceState({ url: initial }, '', cleanUrl);
      loadContent(initial, false);
    });
  </script>

  <footer>
    <a href="pages/privacy.html">Privacy Policy</a>
    <span id="copyright"></span>
    <span id="design-credit"></span>
  </footer>

  <script>
    document.getElementById('copyright').textContent =
      '\u00A0\u00A9 ' + new Date().getFullYear() + ' Benny Hartnett';
    document.getElementById('design-credit').textContent =
      ' \u2022 Design by Benny Hartnett';
  </script>
</body>

</html>
